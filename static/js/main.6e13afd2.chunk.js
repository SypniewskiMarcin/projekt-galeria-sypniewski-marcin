(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,a,t){e.exports=t(41)},29:function(e,a,t){},34:function(e,a,t){},37:function(e,a,t){},38:function(e,a,t){},39:function(e,a,t){},40:function(e,a,t){},41:function(e,a,t){"use strict";t.r(a);var n=t(2),c=t.n(n),l=t(18),o=t.n(l),r=(t(29),t(19)),s=t(10),i=t(20),m=t(9),u=t(7);const d=Object(r.a)({apiKey:"AIzaSyAE6S9fI8SYxBTIcm7gCI3cOTrQkKWJRxw",authDomain:"projekt-galeria-sypniewski-m.firebaseapp.com",projectId:"projekt-galeria-sypniewski-m",storageBucket:"projekt-galeria-sypniewski-m.firebasestorage.app",messagingSenderId:"965126286990",appId:"1:965126286990:web:838ac7b5c34b09d90ba3df",measurementId:"G-J180LR3YQF"}),b=(Object(i.a)(d),Object(s.b)(d)),g=new s.a,p=Object(m.b)(d),E=Object(u.c)(d);t(34);var j=t(14),w=t(8);var f=e=>{let{user:a,onLogout:t}=e;return c.a.createElement("header",{className:"App-header"},c.a.createElement("h1",null,"Galeria Zdj\u0119\u0107"),a&&c.a.createElement(c.a.Fragment,null,"admin"===a.role&&c.a.createElement("a",{href:"/admin-panel",className:"admin-link"},"Panel Administracyjny"),c.a.createElement("button",{className:"logout-button",onClick:async()=>{if(window.confirm("Czy na pewno chcesz si\u0119 wylogowa\u0107?"))try{await Object(s.e)(b),t()}catch(e){console.error("B\u0142\u0105d wylogowania:",e)}}},"Wyloguj ",c.a.createElement(j.a,{icon:w.c}))))};var y=function(){return c.a.createElement("footer",{className:"App-footer"},c.a.createElement("p",null,"\xa9 2024 Projekt Galeria"))};t(37);var k=e=>{let{imageUrl:a,onClose:t,onPrev:l,onNext:o}=e;return Object(n.useEffect)(()=>{const e=e=>{"Escape"===e.key&&t(),"ArrowLeft"===e.key&&l(),"ArrowRight"===e.key&&o()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t,l,o]),c.a.createElement("div",{className:"modal-overlay",onClick:t},c.a.createElement("div",{className:"modal-content",onClick:e=>e.stopPropagation()},c.a.createElement("button",{className:"modal-close",onClick:t},c.a.createElement(j.a,{icon:w.d})),c.a.createElement("button",{className:"modal-nav modal-prev",onClick:l},c.a.createElement(j.a,{icon:w.a})),c.a.createElement("img",{src:a,alt:"Powi\u0119kszone zdj\u0119cie"}),c.a.createElement("button",{className:"modal-nav modal-next",onClick:o},c.a.createElement(j.a,{icon:w.b}))))};t(38);var O=e=>{let{message:a,onClose:t}=e;return Object(n.useEffect)(()=>{const e=setTimeout(()=>{t()},5e3);return()=>clearTimeout(e)},[t]),c.a.createElement("div",{className:"alert"},a)};t(39);var v=function(){const[e,a]=Object(n.useState)(null),[t,l]=Object(n.useState)([]),[o,r]=Object(n.useState)(""),[s,i]=Object(n.useState)(null),[u,d]=Object(n.useState)("");Object(n.useEffect)(()=>{const e=[];for(let a=1;a<=29;a++)e.push(`images/2024-11-05_fot_marcin-sypniewski_@pierwiastek-${a}.jpg`);l(e)},[]);const g=e=>{const a=b.currentUser.uid,t=Object(m.c)(p,`images/${a}/${e}`);Object(m.a)(t).then(e=>{console.log("File available at",e),l(a=>[...a,e])}).catch(e=>{console.error("Error getting file URL:",e)})};return c.a.createElement("main",null,c.a.createElement("div",{className:"upload-container"},c.a.createElement("input",{type:"file",id:"fileInput",onChange:e=>{const a=e.target.files[0];i(a)},className:"file-input"}),c.a.createElement("button",{onClick:()=>{s?(e=>{const a=b.currentUser.uid,t=Object(m.c)(p,`images/${a}/${e.name}`);Object(m.d)(t,e).then(a=>{console.log("Uploaded a blob or file!",a),g(e.name),d("Plik wys\u0142any pomy\u015blnie!"),i(null),document.getElementById("fileInput").value=""}).catch(e=>{console.error("Error uploading file:",e),r("B\u0142\u0105d przesy\u0142ania pliku. Spr\xf3buj ponownie.")})})(s):r("Prosz\u0119 wybra\u0107 plik przed wys\u0142aniem.")},className:"upload-button"},"Wy\u015blij"),o&&c.a.createElement("p",{className:"error-message"},o)," "),u&&c.a.createElement(O,{message:u,onClose:()=>d("")}),c.a.createElement("div",{className:"gallery"},t.map((e,t)=>c.a.createElement("div",{key:t,className:"gallery-item",onClick:()=>a(t)},c.a.createElement("img",{src:e,alt:`Zdj\u0119cie ${t+1}`})))),null!==e&&c.a.createElement(k,{imageUrl:t[e],onClose:()=>a(null),onPrev:()=>{a(e=>e>0?e-1:t.length-1)},onNext:()=>{a(e=>e<t.length-1?e+1:0)}}))};var h=e=>{let{onLoginSuccess:a}=e;const[t,l]=Object(n.useState)("");return c.a.createElement("div",{className:"login-container"},c.a.createElement("h2",null,"Zaloguj si\u0119"),c.a.createElement("button",{className:"login-button",onClick:async()=>{try{const e=(await Object(s.d)(b,g)).user,n=Object(u.a)(E,"users",e.uid);(await Object(u.b)(n)).exists()||await Object(u.d)(n,{uid:e.uid,name:e.displayName,email:e.email,role:"user"});const c=Object(u.a)(E,"settings","admin"),o=await Object(u.b)(c);let r="user";if(o.exists()){const a=o.data().email;e.email===a&&(r="admin",await Object(u.d)(n,{role:"admin"},{merge:!0}))}else console.warn("Dokument admin nie istnieje w kolekcji settings.");console.log("Zalogowano pomy\u015blnie"),a({...e,role:r})}catch(t){l(t.message),console.error("B\u0142\u0105d logowania:",t)}}},"Zaloguj si\u0119 przez Google"),t&&c.a.createElement("p",{className:"error-message"},t)," ")};t(40);t(12).b.add(w.c,w.d,w.a,w.b);var N=function(){const[e,a]=Object(n.useState)(null);return Object(n.useEffect)(()=>{const e=Object(s.c)(b,async e=>{if(e){const t=Object(u.a)(E,"users",e.uid),n=await Object(u.b)(t),c=n.exists()?n.data().role:"user";a({...e,role:c})}else a(null)});return()=>e()},[]),c.a.createElement("div",{className:"App"},c.a.createElement(f,{user:e,onLogout:()=>a(null)}),e?c.a.createElement(v,null):c.a.createElement(h,{onLoginSuccess:async e=>{const t=Object(u.a)(E,"users",e.uid),n=await Object(u.b)(t),c=n.exists()?n.data().role:"user";a({...e,role:c})}}),c.a.createElement(y,null))};var C=e=>{e&&e instanceof Function&&t.e(3).then(t.bind(null,42)).then(a=>{let{getCLS:t,getFID:n,getFCP:c,getLCP:l,getTTFB:o}=a;t(e),n(e),c(e),l(e),o(e)})};function S(){window.matchMedia("(prefers-color-scheme: dark)").matches?document.body.classList.add("dark-mode"):document.body.classList.remove("dark-mode")}o.a.createRoot(document.getElementById("root")).render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(N,null))),C(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",S),S()}},[[21,1,2]]]);
//# sourceMappingURL=main.6e13afd2.chunk.js.map